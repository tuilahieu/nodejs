<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var arrayIntergers = [1, 1, 3, 3, 6, 5, 3, 4, 5, 7, 11];

      // # Bài 01 Cho trước 1 mảng số nguyên, yêu cầu tìm số lớn nhất, nhỏ nhất trong mảng và vị trí
      function getMinNumber(arr) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        var min = arr[0];
        var index = 0;
        arr.forEach(function (int, idx) {
          if (min > int) {
            min = int;
            index = idx;
          }
        });
        return `Số nhỏ nhất trong mảng là ${min} và vị trí ${index}`;
      }
      function getMaxNumber(arr) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        var max = arr[0];
        var index = 0;
        arr.forEach(function (int, idx) {
          if (max < int) {
            max = int;
            index = idx;
          }
        });
        return `Số lớn nhất trong mảng là ${max} và vị trí ${index}`;
      }
      console.log(getMinNumber(arrayIntergers));
      console.log(getMaxNumber(arrayIntergers));

      // # Bài 02 Cho trước 1 mảng số nguyên, tính trung bình các số nguyên tố trong mảng. Nếu trong mảng không có số nguyên tố thì hiển thị “Không có số nguyên tố”

      function isPrime(n) {
        if (n < 2) {
          return false;
        }
        for (let i = 2; i <= Math.sqrt(n); i++) {
          if (n % i === 0) {
            return false;
          }
        }
        return true;
      }

      function getPrimeNumbers(arr) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        var arrPrimes = [];
        arr.forEach((int) => {
          if (isPrime(int)) arrPrimes.push(int);
        });
        return arrPrimes;
      }

      var arrPrimes = getPrimeNumbers(arrayIntergers);

      function caculateAvgPrimes(arr) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        if (arr.length <= 0) return "Không có số nguyên tố";
        var result = 0;
        arr.forEach((number) => {
          result += number;
        });
        var avg = Number(result / arr.length).toFixed(1);
        return `Trung bình của các số nguyên tố có trong mảng là ${avg}`;
      }
      console.log(caculateAvgPrimes(arrPrimes));

      // # Bài 03 Cho trước 1 mảng bất kỳ, nếu trong mảng có các phần tử trùng nhau thì chỉ giữa lại 1 (Gọi là lọc trùng). In ra mảng sau khi đã xử lý

      function removeDuplicate(arr) {
        var result = [];
        arr.forEach((item) => {
          if (!result.includes(item)) result.push(item);
        });
        return result;
      }
      console.log(removeDuplicate(arrayIntergers));

      // # Bài 04
      console.log("Bài 4");

      var numbers = [5, 1, 9, 8, 10];
      var element = 4;
      var randomIndex = 2;

      function sortByIncreasing(arr) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        return arr.sort((a, b) => a - b);
      }

      function insertNumberToArray(arr, number, indexInserted) {
        if (!Array.isArray(arr)) return "Đầu vào không phải mảng !";
        var newArr = [];
        var startOfSlicedArray = arr.slice(0, indexInserted);
        var endOfSlicedArray = arr.slice(indexInserted);
        newArr = newArr.concat(startOfSlicedArray, number, endOfSlicedArray);
        return sortByIncreasing(newArr);
      }

      console.log(insertNumberToArray(numbers, element, randomIndex));
    </script>
  </body>
</html>
